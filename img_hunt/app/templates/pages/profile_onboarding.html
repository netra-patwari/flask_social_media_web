{% extends "layout/b.html" %}

{% block content %}

<div class="text-center max-w mb-2">
    <h1>Complete your Profile</h1>
    
</div>

<form action="{{ url_for('profile_onboarding' , username=user.username) }}" method="POST" id="profileForm" enctype="multipart/form-data" >
    <div class="text-center flex flex-col items-center">
        <label for="inputImg">
            <input type="file" value="https://pbs.twimg.com/profile_images/508601156767997952/fFTdKUf2_400x400.jpeg" name="avatar" id="inputImg" class="hidden">
            <img id="avatarr" class="cursor-pointer w-36 h-36 rounded-full object-cover mb-4" src="https://pbs.twimg.com/profile_images/508601156767997952/fFTdKUf2_400x400.jpeg" />

        </label>

        <div class="text-center max-w-md">
            <h1 id="displayedName">{{user.username}}</h1>
            <div class="text-gray-400 mb-2 -mt-3">{{user.username}}</div>
        </div>
    </div>

    <p>
        <label for="nameInput">Name:</label>
        <input type="text" name="name" value="{{user.username}}" maxlength="40" id="nameInput" required>
    </p>

    <p>
        <label for="locationInput">Location:</label>
        <input type="text" name="location" placeholder="" value={{user.location}} maxlength="254" required="" id="locationInput">
    </p>

    <p>
        <label for="bioInput">Bio:</label>
        <textarea name="bio" cols="40" rows="3" id="bioInput">I hate school but I love hamburgers</textarea>
    </p>

    <div class="flex justify-center items-center">
        <button type="submit" id="signupButton">Continue</button>
    </div>

</form>

{% endblock content %}


{% block script %}
<script>
    const fileInput = document.querySelector('input[type="file"]');

    fileInput.addEventListener('change', (event) => {
        const file = event.target.files[0];
        const image = document.querySelector('#avatarr');

        if (file && file.type.includes('image')) {
            const url = URL.createObjectURL(file);
            image.src = url;
        }
    });

    // Update the displayed name
    const nameInput = document.getElementById('nameInput');
    const displayedName = document.getElementById('displayedName');

    nameInput.addEventListener('input', (event) => {
        displayedName.innerText = event.target.value;
    });
</script>
{% endblock script %} 
